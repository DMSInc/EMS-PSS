//user type global variable
var userType="";

//validation for first name
function NameValidation(inputValue)
{
	var bName = false;
	if(userType == "A")
	{
		
		var pattAd = /^[a-zA-Z'.]{1,40}$/;
		//var nameCheckAd = inputValue;
		
		if(inputValue != null && inputValue != "" && inputValue.match(pattAd) != null)
		{
			bName = true;
		}
		/*else
		{
			if(inputValue.match(pattAd) == null)
			{
				bName = false;
			}
		}*/
	}
	else
	{
		var number = /[\d+]/;
		var pattGe = /[a-zA-Z-`\s]{1,40}/;
		if(inputValue == null || inputValue == "" || inputValue.match(pattGe) != null)
		{
			if(inputValue.match(number) == null)
			{
				bName = true;
			}
		}
	}
	
	return bName;
}
//validation for last name
function NameValidation(inputValue)
{
	var bName = false;
	if(userType == "A")
	{
		
		var pattAd = /^[a-zA-Z'.]{1,40}$/;
		//var nameCheckAd = inputValue;
		
		if(inputValue != null && inputValue != "" && inputValue.match(pattAd) != null)
		{
			bName = true;
		}
		/*else
		{
			if(inputValue.match(pattAd) == null)
			{
				bName = false;
			}
		}*/
	}
	else
	{
		var number = /[\d+]/;
		var pattGe = /[a-zA-Z-`\s]{1,40}/;
		if(inputValue == null || inputValue == "" || inputValue.match(pattGe) != null)
		{
			if(inputValue.match(number) == null)
			{
				bName = true;
			}
		}
	}
	
	return bName;
}
//validation for comapny
function companyValidation(inputValue)
{

	var bCompany = true;
	var companyCheck = inputValue;

	if(companyCheck == null || companyCheck == "")
	{
		bCompany = false;
	}
	return bCompany;
}
//validation for sin
//global variables
var esum = 0;
var enumbers = "";
var checknum = 0;
var ch_sum = "";
var checkdigit = 0;
var sin = "";
var lastdigit = 0;
function sinValidation(value)
{
	esum = 0;
    enumbers = "";
    checknum = 0;
    ch_sum = "";
    checkdigit = 0;
    sin = "";
    lastdigit = 0;
	var bCheckSinResult = false;
	
    if (isNum(value.value))
	{
		bCheckSinResult = true;
	}

	return bCheckSinResult;
}

function isNum(text) 
{
	if(text == "" || text == null || text.length == 0) 
	{
		return false;
	}
	inStr = text;
	sin = text;
	inLen = inStr.length;

	if (inLen > 11 || inLen < 11) 
	{
		return false;
	}

	for (var i = 0; i < text.length; i++) 
	{
		var ch = text.substring(i, i + 1)

		if ((ch < "0" || "9" < ch) && (ch != " "))  
		{
			return false;
		}
		if ((i == 3 || i == 7) && (ch != " ")) 
		{
			return false;
		}
	}
	lastdigit = text.substring(10, 10 + 1);
	// add numbers in odd positions; IE 1, 3, 6, 8		
	var odd = ((text.substring(0,0 + 1)) * (1.0)  + (text.substring(2,2 + 1)) * (1.0)+(text.substring(5, 5+1)) * (1.0) + (text.substring(8,8 + 1)) * (1.0));
            			
	// form texting of numbers in even positions IE 2, 4, 6, 8
	var enumbers =  (text.substring(1,1 + 1)) + (text.substring(4,4 + 1))+
	(text.substring(6,6 + 1)) + (text.substring(9,9 + 1));
            
	// add together numbers in new text string
	// take numbers in even positions; IE 2, 4, 6, 8
	// and double them to form a new text string
	// EG if numbers are 2,5,1,9 new text string is 410218
	for (var i = 0; i < enumbers.length; i++) 
	{
		var ch = (enumbers.substring(i, i + 1) * 2);
		ch_sum = ch_sum + ch;
	}
            
	for (var i = 0; i < ch_sum.length; i++) 
	{
		var ch = (ch_sum.substring(i, i + 1));
		esum = ((esum * 1.0) + (ch * 1.0));
	}

	checknum = (odd + esum);

	// subtextact checknum from next highest multiple of 10
	// to give check digit which is last digit in valid SIN
	if (checknum <= 10) 
	{
		(checdigit = (10 - checknum));
	}
	if (checknum > 10 && checknum <= 20) 
	{
		(checkdigit = (20 - checknum));
	}
	if (checknum > 20 && checknum <= 30) 
	{
		(checkdigit = (30 - checknum));
	}
	if (checknum > 30 && checknum <= 40) 
	{
		(checkdigit = (40 - checknum));
	}
	if (checknum > 40 && checknum <= 50) 
	{
		(checkdigit = (50 - checknum));
	}
    if (checknum > 50 && checknum <= 60)
	{
		(checkdigit = (60 - checknum));
	}
			
    if (checkdigit != lastdigit) 
	{
		return false;
	}					  			
	return true;
}

//validation for date of hire
var hYYYY;
var hMM;
var hDD;
function hireValidation(value)
{
	var bDate  = false;
	//var dateReg = /^\d{4}-\d{2}-\d{2}$/;
	var dateReg = /^\d{4}-\d{2}-\d{2}|^\d{4}-\d{1}-\d{1}|^\d{4}-\d{1}-\d{2}|^\d{4}-\d{2}-\d{1}$/;
	
	if(userType == "A")
	{
		if(value != null && value != "" && value.match(dateReg) != null)
		{
			var regs = value.split("-");
			var yyyy = parseInt(regs[0]);
			var mm = parseInt(regs[1]);
			var dd = parseInt(regs[2]);
			hYYYY = yyyy;
			hMM = mm;
			hDD = dd;
			if(yyyy >= 1902 && yyyy <= (new Date().getFullYear()) && mm >= 1 && mm <= 12 && dd >= 1 && dd <= 31 && compareBirthdayAndHireDay(bYYYY, yyyy) == true)
			{
				if(mm == 2 && mm <= 28)
				{
					bDate = true;
				}
			}
		}
	}
	else
	{
		if(value == null || value == "" || value == "0") 
		{
			bDate = true;
		}
		if(value.match(dateReg) != null)
		{
			var regs = value.split("-");
			var yyyy = parseInt(regs[0]);
			var mm = parseInt(regs[1]);
			var dd = parseInt(regs[2]);
			bYYYY = yyyy;
			
			if(yyyy >= 1902 && yyyy <= (new Date().getFullYear()) && mm >= 1 && mm <= 12 && dd >= 1 && dd <= 31) 
			{
				if(mm == 2 && mm <= 28)
				{
					bDate = true;
				}
				
			}
		}
	}
	return bDate;
}
//validaiton for date of birth
var bYYYY;
function birthdayValidation(value)
{
	var bDate  = false;
	var dateRegFormat = /^\d{4}-\d{2}-\d{2}|^\d{4}-\d{1}-\d{1}|^\d{4}-\d{1}-\d{2}|^\d{4}-\d{2}-\d{1}$/;
	if(userType == "A")
	{
		
		if(value != null && value != "" && value.match(dateRegFormat) != null)
		{
			var regs = value.split("-");
			var yyyy = parseInt(regs[0]);
			var mm = parseInt(regs[1]);
			var dd = parseInt(regs[2]);
			bYYYY = yyyy;
			
			if(yyyy >= 1902 && yyyy <= (new Date().getFullYear()) && mm >= 1 && mm <= 12 && dd >= 1 && dd <= 31) 
			{
				if(mm == 2 && mm <= 28)
				{
					bDate = true;
				}
				
			}
			
		}
	}
	else
	{
		if(value == null || value == "" || value == "0") 
		{
			bDate = true;
		}
		if(value.match(dateRegFormat) != null)  //this check for real, actual valid date for general user
		{
			var regs = value.split("-");
			var yyyy = parseInt(regs[0]);
			var mm = parseInt(regs[1]);
			var dd = parseInt(regs[2]);
			bYYYY = yyyy;
			
			if(yyyy >= 1902 && yyyy <= (new Date().getFullYear()) && mm >= 1 && mm <= 12 && dd >= 1 && dd <= 31) 
			{
				if(mm == 2 && mm <= 28)
				{
					bDate = true;
				}
				
			}
		}
	}
	
	return bDate;	
}

//compare birthday with hire day
//for now, I didn't add work type(fulltime and seasonal 18+) (parttime 16+)
function compareBirthdayAndHireDay(bYYYY, hYYYY)
{
	bResult = false;
	if(hYYYY - bYYYY >= 18)
	{
		bResult = true;
	}
	
	return bResult;
	
}
//validaiton for date of termination
function terminationValidation(value)
{
	var bDate  = false;
	//var dateReg = /^\d{4}-\d{2}-\d{2}$/;
	var dateReg = /^\d{4}-\d{2}-\d{2}|^\d{4}-\d{1}-\d{1}|^\d{4}-\d{1}-\d{2}|^\d{4}-\d{2}-\d{1}$/;
	if(userType == "A")
	{
		
		if(value != null && value != "" && value.match(dateReg) != null)
		{
			var regs = value.split("-");
			var yyyy = parseInt(regs[0]);
			var mm = parseInt(regs[1]);
			var dd = parseInt(regs[2]);
			bYYYY = yyyy;
			if(yyyy >= 1902 && yyyy <= (new Date().getFullYear()) && mm >= 1 && mm <= 12 && dd >= 1 && dd <= 31 && compareHireDayandTermination(hYYYY, hMM, hDD, yyyy, mm, dd) == true)
			{
				if (mm == 2 && mm <=28)
				{
					bDate = true;
				}
			}
		}
	}
	else
	{
		if(value == null || value == "" || value == "0" || value == "N/A") 
		{
			bDate = true;
		}
		if(value.match(dateReg) != null)
		{
			var regs = value.split("-");
			var yyyy = parseInt(regs[0]);
			var mm = parseInt(regs[1]);
			var dd = parseInt(regs[2]);
			bYYYY = yyyy;
			
			if(yyyy >= 1902 && yyyy <= (new Date().getFullYear()) && mm >= 1 && mm <= 12 && dd >= 1 && dd <= 31) 
			{
				if(mm == 2 && mm <= 28)
				{
					bDate = true;
				}
				
			}
		}
	}
	return bDate;
}
//compare for hire day and termination

function compareHireDayandTermination(hYYYY, hMM, hDD, tYYYY, tMM, tDD)   
{
	bResult = false;
	if(tYYYY - hYYYY >= 0)
	{
		if(tMM - hMM >= 0)
		{
			if(tDD - hDD >= 0)
			{
				bResult = true;
			}
		}
	}
	return bResult;
	
}
//validation for salary
function salaryValidation(value)
{
	var bSalary = false;
	if(userType == "A")
	{
		if(value > 0 && value != null && value != "")
		{
			bSalary = true;
		}		
	}
	else
	{
		if(value >= 0 && value != null && value != "")
		{
			bSalary = true;
		}
	}
	return bSalary;
}
//validaiton for season
function seasonValidation(inputValue){

	var allowedWords = ['winter','spring','summer','fall'];

	if(allowedWords.indexOf(inputValue.trim().toLowerCase()) > -1)
	{
		return true;
	}
	else
	{
		return false;
	}

}
//validaiton for season year
function seasonYearValidation(value)
{
	var bSeasonYear = true;
	var yearReg = /^\d{4}$/;

	if(value == null || value == "")
	{
		bSeasonYear = false;
	}
	else
	{
		if(value.match(yearReg) != null)
		{
			var yyyy = parseInt(value);
			if(yyyy < 1902 || yyyy > (new Date().getFullYear())) 
			{
				bSeasonYear = false;
			}
		}
		else
		{
			bSeasonYear = false;
		}
	}
	return bSeasonYear;
//validation for time card fields


//validation for different reports 

//validation for searching an employee like sin number
function searchEmplpyeeBySin(value)
{
	//check sin is it, if yes, go to database check have or nor have this employee

	//if no, display an invalid SIN number notification to user 
}

//validation for hour
function hourlyRateValidation(value)
{
	var hourReg = /^\d*(?:\.\d{1,2})?$/;
	var bResult = false;

	if(userType == "A")
	{
		if(value != null && value != "" && value.match(hourReg) != null)
		{
			var hour = parseFloat(value);
			if(hour != 0.00 && hour <= 24.00)
			{
				bResult = true;
			}
		}
	}
	else
	{
		if(value >= 0 && value != null && value != "")
		{
			bResult = true;
		}
	}
	return bResult;
}



//Admin user fix contract amount validation
function fixContractAmountValidation(value)
{
	var bFixContractAmount = false;

	if(value != null && value != "" && value > 0)
	{
		bFixContractAmount = true;
		
	}
	return bFixContractAmount;
}